<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cline AI Agent - Conversational Assistant</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1 class="app-title">
                    <span class="icon">ü§ñ</span>
                    Cline AI Agent
                    <span class="subtitle">Your Intelligent Assistant</span>
                </h1>
                <div class="header-actions">
                    <div class="status-indicator">
                        <span id="aiStatus" class="status-dot offline"></span>
                        <span id="aiStatusText">Offline</span>
                    </div>
                    <button id="settingsBtn" class="btn btn-secondary">
                        <span class="icon">‚öôÔ∏è</span>
                        Settings
                    </button>
                    <button id="helpBtn" class="btn btn-secondary">
                        <span class="icon">‚ùì</span>
                        Help
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Chat Interface -->
        <main class="main-content">
            <!-- Welcome Section (shown when no conversation) -->
            <section id="welcomeSection" class="welcome-section">
                <div class="welcome-container">
                    <div class="welcome-header">
                        <div class="ai-avatar">ü§ñ</div>
                        <h2>Hello! I'm your AI Assistant</h2>
                        <p>I can help you with programming, system administration, file management, and much more. Just ask me anything!</p>
                    </div>

                    <div class="capabilities-grid">
                        <div class="capability-card">
                            <div class="capability-icon">üíª</div>
                            <h3>Code & Development</h3>
                            <p>Write, debug, and improve code in any language</p>
                        </div>
                        <div class="capability-card">
                            <div class="capability-icon">‚ö°</div>
                            <h3>System Commands</h3>
                            <p>Execute terminal commands and manage your system</p>
                        </div>
                        <div class="capability-card">
                            <div class="capability-icon">üìÅ</div>
                            <h3>File Operations</h3>
                            <p>Create, read, modify, and organize files</p>
                        </div>
                        <div class="capability-card">
                            <div class="capability-icon">üîç</div>
                            <h3>Analysis & Research</h3>
                            <p>Analyze data, research topics, and solve problems</p>
                        </div>
                    </div>

                    <div class="example-prompts">
                        <h3>Try asking me:</h3>
                        <div class="prompt-suggestions">
                            <button class="suggestion-btn" data-prompt="Mi nombre es Juan, ay√∫dame a crear una API REST">
                                "Mi nombre es Juan, ay√∫dame a crear una API REST"
                            </button>
                            <button class="suggestion-btn" data-prompt="Analiza mi proyecto y sugiere mejoras">
                                "Analiza mi proyecto y sugiere mejoras"
                            </button>
                            <button class="suggestion-btn" data-prompt="Encuentra y corrige errores en mi c√≥digo">
                                "Encuentra y corrige errores en mi c√≥digo"
                            </button>
                            <button class="suggestion-btn" data-prompt="Configura un entorno de desarrollo completo">
                                "Configura un entorno de desarrollo completo"
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Chat Section -->
            <section id="chatSection" class="chat-section hidden">
                <div class="chat-container">
                    <div class="chat-header">
                        <h3>Conversation</h3>
                        <div class="chat-actions">
                            <button id="clearChatBtn" class="btn btn-secondary btn-small">
                                <span class="icon">üóëÔ∏è</span>
                                Clear
                            </button>
                            <button id="exportChatBtn" class="btn btn-secondary btn-small">
                                <span class="icon">üì§</span>
                                Export
                            </button>
                            <button id="stopReasoningBtn" class="btn btn-danger btn-small" style="display: none;">
                                <span class="icon">üõë</span>
                                STOP
                            </button>
                        </div>
                    </div>
                    <div id="chatMessages" class="chat-messages">
                        <!-- Messages will be added here dynamically -->
                    </div>
                    <div id="typingIndicator" class="typing-indicator hidden">
                        <div class="typing-dots">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <span>AI is thinking...</span>
                    </div>
                </div>
            </section>



            <!-- Tool Approval Section -->
            <section id="toolApprovalSection" class="tool-approval-section hidden">
                <div class="approval-container">
                    <div class="approval-header">
                        <span class="icon">üîß</span>
                        <h3>Tool Execution Request</h3>
                    </div>
                    <div class="tool-info">
                        <div class="tool-details">
                            <div class="tool-name">
                                <span class="label">Tool:</span>
                                <span id="toolName" class="value">Unknown Tool</span>
                            </div>
                            <div class="tool-description">
                                <span class="label">Description:</span>
                                <span id="toolDescription" class="value">No description available</span>
                            </div>
                            <div class="tool-parameters">
                                <span class="label">Parameters:</span>
                                <pre id="toolParameters" class="value">No parameters</pre>
                            </div>
                        </div>
                        <div class="safety-warning">
                            <span class="icon">‚ö†Ô∏è</span>
                            <p>This tool will make changes to your system. Please review carefully before approving.</p>
                        </div>
                    </div>
                    <div class="approval-actions">
                        <button id="approveToolBtn" class="btn btn-success">
                            <span class="icon">‚úÖ</span>
                            Approve & Execute
                        </button>
                        <button id="rejectToolBtn" class="btn btn-danger">
                            <span class="icon">‚ùå</span>
                            Reject
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Chat Input -->
        <footer class="chat-input-section">
            <div class="input-container">
                <div class="input-wrapper">
                    <textarea
                        id="messageInput"
                        placeholder="Ask me anything... I can help with coding, system tasks, file operations, and more!"
                        rows="1"
                        maxlength="4000"
                    ></textarea>
                    <div class="input-actions">
                        <button id="attachBtn" class="btn btn-icon" title="Attach file">
                            <span class="icon">üìé</span>
                        </button>
                        <button id="sendBtn" class="btn btn-primary" disabled>
                            <span class="icon">üöÄ</span>
                            Send
                        </button>
                    </div>
                </div>
                <div class="input-footer">
                    <div class="character-count">
                        <span id="charCount">0</span>/4000
                    </div>
                    <div class="input-hints">
                        Press <kbd>Enter</kbd> to send, <kbd>Shift+Enter</kbd> for new line
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>AI Configuration</h3>
                <button id="closeSettingsBtn" class="btn btn-text">
                    <span class="icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-tabs">
                    <button class="tab-btn active" data-tab="model">Model</button>
                    <button class="tab-btn" data-tab="behavior">Behavior</button>
                    <button class="tab-btn" data-tab="safety">Safety</button>
                </div>

                <!-- Model Settings -->
                <div id="modelTab" class="tab-content active">
                    <div class="setting-group">
                        <label for="aiModelSelect">AI Model:</label>
                        <select id="aiModelSelect">
                            <option value="claude-3-sonnet-20240229" selected>Claude 3 Sonnet ‚úÖ</option>
                            <option value="claude-3-5-haiku-20241022">Claude 3.5 Haiku ‚úÖ</option>
                            <option value="claude-3-haiku-20240307">Claude 3 Haiku ‚úÖ</option>
                            <option value="gpt-4o">GPT-4o ‚úÖ</option>
                            <option value="gpt-4o-mini">GPT-4o Mini ‚úÖ</option>
                            <option value="gpt-4">GPT-4 ‚úÖ</option>
                            <option value="gpt-3.5-turbo">GPT-3.5 Turbo ‚úÖ</option>
                            <option value="o3">o3 (Custom) ‚úÖ</option>
                        </select>
                    </div>
                    <div class="setting-group" id="authHeaderGroup" style="display: none;">
                        <label for="authHeaderInput">Authentication Header Name:</label>
                        <input type="text" id="authHeaderInput" placeholder="Authorization, X-API-Key, X-Auth-Token, etc.">
                        <small>Name of the authentication header (e.g., "Authorization", "X-API-Key").</small>
                    </div>
                    <div class="setting-group">
                        <label for="apiKeyInput">API Key:</label>
                        <input type="password" id="apiKeyInput" placeholder="Enter your API key or header value">
                        <small>Your API key is stored securely and never shared.</small>
                    </div>
                    <div class="setting-group">
                        <label for="baseUrlInput">Base URL (Optional):</label>
                        <input type="url" id="baseUrlInput" placeholder="Enter API base URL">
                        <small>For custom API endpoints or proxies.</small>
                    </div>
                </div>

                <!-- Behavior Settings -->
                <div id="behaviorTab" class="tab-content">
                    <div class="setting-group">
                        <label for="maxTokensInput">Max Tokens:</label>
                        <input type="number" id="maxTokensInput" value="4000" min="100" max="100000">
                        <small>Maximum tokens for AI responses.</small>
                    </div>
                    <div class="setting-group">
                        <label for="temperatureInput">Temperature:</label>
                        <input type="range" id="temperatureInput" min="0" max="2" step="0.1" value="0.7">
                        <span id="temperatureValue">0.7</span>
                        <small>Controls creativity vs consistency (0 = focused, 2 = creative).</small>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="streamingCheckbox" checked>
                            Enable streaming responses
                        </label>
                        <small>Show responses as they're generated.</small>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="persistentMemoryCheckbox">
                            Mantener memoria entre conversaciones
                        </label>
                        <small>Si est√° activado, el AI recordar√° informaci√≥n de conversaciones anteriores. Si est√° desactivado, cada conversaci√≥n empezar√° con memoria limpia.</small>
                    </div>
                </div>

                <!-- Safety Settings -->
                <div id="safetyTab" class="tab-content">
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="autoApproveReadCheckbox">
                            Auto-approve file reading
                        </label>
                        <small>Automatically approve safe read operations.</small>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="autoApproveListCheckbox">
                            Auto-approve directory listing
                        </label>
                        <small>Automatically approve listing files and directories.</small>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="autoRunCommandsCheckbox">
                            Auto-run commands (Modo Auto-Run)
                        </label>
                        <small>Automatically execute all suggested commands without confirmation.</small>
                    </div>
                    <div class="setting-group">
                        <label>
                            <input type="checkbox" id="confirmDangerousCheckbox" checked>
                            Confirm dangerous operations
                        </label>
                        <small>Always ask before file modifications or system commands.</small>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveSettingsBtn" class="btn btn-primary">Save Settings</button>
                <button id="cancelSettingsBtn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Help & Usage Guide</h3>
                <button id="closeHelpBtn" class="btn btn-text">
                    <span class="icon">‚úï</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h4>üöÄ Getting Started</h4>
                    <p>Simply type your request in natural language. I can understand context and help with complex tasks.</p>
                </div>

                <div class="help-section">
                    <h4>üí° Example Requests</h4>
                    <ul>
                        <li><strong>Programming:</strong> "Create a Python function to sort a list"</li>
                        <li><strong>System Tasks:</strong> "Show me all running processes"</li>
                        <li><strong>File Operations:</strong> "Create a backup of my project folder"</li>
                        <li><strong>Analysis:</strong> "Analyze this log file for errors"</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h4>üîß Tool Approvals</h4>
                    <p>When I need to execute commands or modify files, I'll ask for your permission first. You can:</p>
                    <ul>
                        <li><strong>Approve:</strong> Let me execute the tool</li>
                        <li><strong>Reject:</strong> Cancel the operation</li>
                        <li><strong>Auto-approve:</strong> Configure automatic approvals for safe operations</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h4>‚öôÔ∏è Configuration</h4>
                    <p>Customize my behavior in Settings:</p>
                    <ul>
                        <li><strong>Model:</strong> Choose between different AI models</li>
                        <li><strong>Temperature:</strong> Adjust creativity vs consistency</li>
                        <li><strong>Safety:</strong> Configure approval requirements</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h4>üîí Privacy & Security</h4>
                    <p>Your privacy is important:</p>
                    <ul>
                        <li>All conversations are local to your machine</li>
                        <li>API keys are stored securely</li>
                        <li>I only access files and run commands with your permission</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button id="closeHelpModalBtn" class="btn btn-primary">Got it!</button>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>
